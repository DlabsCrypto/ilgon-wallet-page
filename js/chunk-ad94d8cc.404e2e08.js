(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad94d8cc"],{4717:function(t,e,n){"use strict";var i=n("568b"),o=n.n(i);o.a},"568b":function(t,e,n){},efc3:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return T}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-container"},[n("div",{staticClass:"container--flex container--top"},[null!==t.contract?n("div",{staticClass:"container--card block--swap"},[t._m(0),n("div",{staticClass:"swap-info"},[null!==t.vaults?n("div",[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.depositAmount,expression:"depositAmount"}],attrs:{type:"number","aria-label":"Deposit amount"},domProps:{value:t.depositAmount},on:{input:function(e){e.target.composing||(t.depositAmount=e.target.value)}}}),n("button",{attrs:{disabled:""===t.depositAmount||t.depositAmount<=0},on:{click:t.deposit}},[t._v(" Deposit ")])]),n("button",{on:{click:t.refresh}},[t._v("Refresh")]),n("br"),t._v(" Show only: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.show,expression:"show"}],staticStyle:{"margin-left":"3%"},attrs:{id:"not-withdrawn",type:"radio"},domProps:{value:"not-withdrawn",checked:t._q(t.show,"not-withdrawn")},on:{change:function(e){t.show="not-withdrawn"}}}),n("label",{attrs:{for:"not-withdrawn"}},[t._v("On stake")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.show,expression:"show"}],staticStyle:{"margin-left":"3%"},attrs:{id:"withdrawn",type:"radio"},domProps:{value:"withdrawn",checked:t._q(t.show,"withdrawn")},on:{change:function(e){t.show="withdrawn"}}}),n("label",{attrs:{for:"withdrawn"}},[t._v("Withdrawn")]),n("table",{staticStyle:{width:"100%"}},[n("caption",[t._v(" Deposits "),"not-withdrawn"===t.show?n("span",[t._v(" (on stake total: "+t._s(t.showDepositsAmount())+") ")]):t._e()]),n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Label")]),n("th",{attrs:{scope:"col"}},[t._v("Deposit time")]),n("th",{attrs:{scope:"col"}},[t._v("Amount")]),n("th",{attrs:{scope:"col"}},[t._v("Earnings")]),n("th",{attrs:{scope:"col"}},[t._v("Percent")]),t.shouldShowDepositTypeColumn()?n("th",{attrs:{scope:"col"}},[t._v("Type")]):t._e(),"withdrawn"===t.show?[n("th",{attrs:{scope:"col"}},[t._v("Withdraw time")])]:[n("th",{attrs:{scope:"col"}},[t._v("Max withdrawable")]),n("th",{attrs:{scope:"col"}})]],2)]),n("tbody",t._l(t.vaults.filter((function(e){return void 0!==e.withdrawTime===("withdrawn"===t.show)})),(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.label||""))]),n("td",[t._v(t._s(e.depositTime.toLocaleString()))]),n("td",[t._v(t._s(t.web3.utils.fromWei(e.amount)))]),n("td",{staticStyle:{"font-family":"monospace"}},[t._v(t._s(t.showInterest(e)))]),n("td",[t._v(t._s(t.percent(e)))]),t.shouldShowDepositTypeColumn()?n("td",[t._v(" "+t._s(t.showDepositType(e))+" ")]):t._e(),void 0!==e.withdrawTime?[n("td",[t._v(t._s(e.withdrawTime.toLocaleString()))])]:[n("td",[t._v(" "+t._s(t.web3.utils.fromWei(e.withdrawableAmount))+" ")]),n("td",["NORMAL"!==e.depositType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.withdrawInput,expression:"d.withdrawInput"}],attrs:{type:"number","aria-label":"Withdraw amount"},domProps:{value:e.withdrawInput},on:{input:function(n){n.target.composing||t.$set(e,"withdrawInput",n.target.value)}}}):t._e(),n("button",{on:{click:function(n){return t.withdraw(e)}}},[t._v("Withdraw")])])]],2)})),0)])]):n("div",[t._v("Loading...")])])]):t._e()])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex--row--align-center title"},[n("h4",[t._v("Staking contract")])])}],a=(n("4de4"),n("a630"),n("caad"),n("d81d"),n("13d5"),n("45fc"),n("b680"),n("d3b7"),n("ac1f"),n("2532"),n("3ca3"),n("5319"),n("ddb0"),n("5530")),r=n("2f62"),s=n("6314"),u=n.n(s),d=n("901e"),c=n.n(d),l=n("8761"),w=function(t){return Array.from({length:t},(function(t,e){return e}))},h=function(t){switch(t){case"0":return"NORMAL";case"1":return"COMPENSATION";case"2":return"PACKAGE";default:throw new Error("Invalid deposit enum: "+t)}};function p(){var t=this;this.contract.methods.getVaultsLength(this.account.address).call().then(w).then((function(e){return Promise.all(e.map((function(e){return t.contract.methods.getVaultById(t.account.address,e).call().then((function(t){var e=t.label,n=t.depositTime,i=t.amount,o=t.withdrawnAmount,a=t.interest,r=t.withdrawTime,s=t.withdrawableAmount,u=t.depositType;return{label:e,depositTime:new Date(1e3*n),amount:i,withdrawnAmount:o,interest:a,withdrawTime:new Date(1e3*r),withdrawableAmount:s,depositType:h(u)}})).then((function(t){var n=t.label,i=t.depositTime,o=t.amount,r=t.withdrawnAmount,s=t.interest,u=t.withdrawTime,d=t.withdrawableAmount,l=t.depositType,w=new c.a(o).minus(r);return Object(a["a"])(Object(a["a"])({id:e,label:n,depositTime:i},w.isEqualTo(0)?{amount:o,withdrawTime:u}:{amount:w.toFixed(),withdrawableAmount:d}),{},{interest:s,depositType:l})}))})))})).then((function(e){return t.vaults=e.map((function(e,n){return Object(a["a"])(Object(a["a"])({},e),{},{withdrawInput:t.vaults&&t.vaults[n]&&t.vaults[n].withdrawInput||""})}))})).finally((function(){t.polling=setTimeout((function(){return p.call(t)}),1e4)}))}function m(t){var e=t.network,n=t.web3;if([l["b"],l["d"]].includes(e.type)){var i=e.type.contracts[0];return new n.eth.Contract(i.abi,i.address)}return null}var v={data:function(){return{depositAmount:"",vaults:null,contract:m({network:this.$store.state.main.network,web3:this.$store.state.main.web3}),polling:null,show:"not-withdrawn"}},computed:Object(a["a"])({},Object(r["c"])("main",["account","web3","network"])),watch:{web3:function(t){clearTimeout(this.polling),this.vaults=null,this.contract=m({network:this.network,web3:t}),null!==this.contract&&p.call(this)}},mounted:function(){null!==this.contract&&p.call(this)},beforeDestroy:function(){clearTimeout(this.polling)},methods:{shouldShowDepositTypeColumn:function(){var t=this;return this.vaults.filter((function(e){return void 0!==e.withdrawTime===("withdrawn"===t.show)})).some((function(t){return"NORMAL"!==t.depositType}))},showDepositsAmount:function(){var t=this.vaults.reduce((function(t,e){var n=e.amount,i=e.withdrawTime;return void 0===i?t.plus(n):t}),new c.a(0)).toFixed(),e=this.web3.utils.fromWei(t);return parseFloat(e).toFixed(8).replace(/(\.\d)*0+$/,"$1")},showInterest:function(t){return new c.a(this.web3.utils.fromWei(t.interest)).toFixed(8)},showDepositType:function(t){switch(t.depositType){case"NORMAL":return"Normal";case"COMPENSATION":return"Compensation";case"PACKAGE":return"Pacakge";default:throw new Error("Invalid deposit enum: "+t.depositType)}},deposit:function(){this.contract.methods.deposit().send({from:this.account.address,value:u.a.utils.toWei(this.depositAmount,"ether")})},withdraw:function(t){this.contract.methods.withdraw(t.id,"NORMAL"===t.depositType?t.amount:this.web3.utils.toWei(t.withdrawInput)).send({from:this.account.address})},refresh:function(){clearTimeout(this.polling),this.vaults=null,p.call(this)},percent:function(t){var e=t.amount,n=t.depositTime,i=t.interest,o=t.withdrawTime,a=31556926e3,r=(o||new Date).getTime()-n.getTime(),s=new c.a(i).dividedBy(e).multipliedBy(new c.a(a).dividedBy(r)).multipliedBy(100);return s.toFixed(2)+" %"}}},f=v,b=(n("4717"),n("2877")),_=Object(b["a"])(f,i,o,!1,null,"63bbcb94",null),T=_.exports}}]);